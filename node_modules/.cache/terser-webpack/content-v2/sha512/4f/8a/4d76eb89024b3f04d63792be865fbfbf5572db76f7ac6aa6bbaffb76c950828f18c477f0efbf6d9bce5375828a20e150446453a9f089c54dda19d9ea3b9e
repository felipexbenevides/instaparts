{"map":{"version":3,"sources":["6-es2015.64bad0841045fa4c7c85.js"],"names":["window","push","ykg1","module","__webpack_exports__","__webpack_require__","r","d","startInputShims","_helpers_5c745fbd_js__WEBPACK_IMPORTED_MODULE_0__","cloneMap","WeakMap","relocateInput","componentEl","inputEl","shouldRelocate","inputRelativeY","has","addClone","removeClone","isFocused","input","getRootNode","activeElement","parentEl","parentNode","clonedEl","cloneNode","classList","add","tabIndex","appendChild","set","tx","ownerDocument","dir","style","pointerEvents","transform","clone","get","delete","remove","SKIP_SELECTOR","setScrollPadding","keyboardHeight","tagName","parentElement","el","closest","timer","clearTimeout","setProperty","setTimeout","config","doc","document","getNumber","scrollAssist","getBoolean","hideCaret","inputBlurring","scrollPadding","inputs","Array","from","querySelectorAll","hideCaretMap","scrollAssistMap","registerInput","async","componentOnReady","inputRoot","shadowRoot","querySelector","scrollEl","footerEl","rmFn","scrollHideCaret","shouldHideCaret","onBlur","showCaret","addEventListener","removeEventListener","enableHideCaretOnScroll","contentEl","coord","touchStart","ev","Object","touchEnd","endCoord","threshold","startCoord","deltaX","x","deltaY","y","hasPointerMoved","preventDefault","stopPropagation","scrollData","inputRect","contentRect","platformHeight","inputTop","top","inputBottom","bottom","visibleAreaTop","safeAreaTop","distanceToBottom","Math","min","distanceToTop","desiredScrollAmount","round","scrollAmount","distance","abs","scrollDuration","max","inputSafeY","calcScrollData","getBoundingClientRect","defaultView","innerHeight","getScrollData","focus","scrollContentTimeout","scrollContent","undefined","scrollByPoint","getScrollElement","scrollHeight","clientHeight","scrollTop","jsSetFocus","enableScrollAssist","focused","didScroll","active","matches","tapped","target","blur","enableInputBlurring","enableScrollPadding","detail","fn","unregisterInput"],"mappings":"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"},"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ykg1:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"startInputShims\",(function(){return startInputShims}));var _helpers_5c745fbd_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"gHap\");const cloneMap=new WeakMap,relocateInput=(componentEl,inputEl,shouldRelocate,inputRelativeY=0)=>{cloneMap.has(componentEl)!==shouldRelocate&&(shouldRelocate?addClone(componentEl,inputEl,inputRelativeY):removeClone(componentEl,inputEl))},isFocused=input=>input===input.getRootNode().activeElement,addClone=(componentEl,inputEl,inputRelativeY)=>{const parentEl=inputEl.parentNode,clonedEl=inputEl.cloneNode(!1);clonedEl.classList.add(\"cloned-input\"),clonedEl.tabIndex=-1,parentEl.appendChild(clonedEl),cloneMap.set(componentEl,clonedEl);const tx=\"rtl\"===componentEl.ownerDocument.dir?9999:-9999;componentEl.style.pointerEvents=\"none\",inputEl.style.transform=`translate3d(${tx}px,${inputRelativeY}px,0) scale(0)`},removeClone=(componentEl,inputEl)=>{const clone=cloneMap.get(componentEl);clone&&(cloneMap.delete(componentEl),clone.remove()),componentEl.style.pointerEvents=\"\",inputEl.style.transform=\"\"},SKIP_SELECTOR=\"input, textarea, [no-blur]\",setScrollPadding=(input,keyboardHeight)=>{if(\"INPUT\"!==input.tagName)return;if(input.parentElement&&\"ION-INPUT\"===input.parentElement.tagName)return;if(input.parentElement&&input.parentElement.parentElement&&\"ION-SEARCHBAR\"===input.parentElement.parentElement.tagName)return;const el=input.closest(\"ion-content\");if(null===el)return;const timer=el.$ionPaddingTimer;timer&&clearTimeout(timer),keyboardHeight>0?el.style.setProperty(\"--keyboard-offset\",`${keyboardHeight}px`):el.$ionPaddingTimer=setTimeout(()=>{el.style.setProperty(\"--keyboard-offset\",\"0px\")},120)},startInputShims=config=>{const doc=document,keyboardHeight=config.getNumber(\"keyboardHeight\",290),scrollAssist=config.getBoolean(\"scrollAssist\",!0),hideCaret=config.getBoolean(\"hideCaretOnScroll\",!0),inputBlurring=config.getBoolean(\"inputBlurring\",!0),scrollPadding=config.getBoolean(\"scrollPadding\",!0),inputs=Array.from(doc.querySelectorAll(\"ion-input, ion-textarea\")),hideCaretMap=new WeakMap,scrollAssistMap=new WeakMap,registerInput=async componentEl=>{componentEl.componentOnReady&&await componentEl.componentOnReady();const inputRoot=componentEl.shadowRoot||componentEl,inputEl=inputRoot.querySelector(\"input\")||inputRoot.querySelector(\"textarea\"),scrollEl=componentEl.closest(\"ion-content\"),footerEl=scrollEl?null:componentEl.closest(\"ion-footer\");if(inputEl){if(scrollEl&&hideCaret&&!hideCaretMap.has(componentEl)){const rmFn=((componentEl,inputEl,scrollEl)=>{if(!scrollEl||!inputEl)return()=>{};const scrollHideCaret=shouldHideCaret=>{isFocused(inputEl)&&relocateInput(componentEl,inputEl,shouldHideCaret)},onBlur=()=>relocateInput(componentEl,inputEl,!1),hideCaret=()=>scrollHideCaret(!0),showCaret=()=>scrollHideCaret(!1);return scrollEl.addEventListener(\"ionScrollStart\",hideCaret),scrollEl.addEventListener(\"ionScrollEnd\",showCaret),inputEl.addEventListener(\"blur\",onBlur),()=>{scrollEl.removeEventListener(\"ionScrollStart\",hideCaret),scrollEl.removeEventListener(\"ionScrollEnd\",showCaret),inputEl.addEventListener(\"ionBlur\",onBlur)}})(componentEl,inputEl,scrollEl);hideCaretMap.set(componentEl,rmFn)}if((scrollEl||footerEl)&&scrollAssist&&!scrollAssistMap.has(componentEl)){const rmFn=((componentEl,inputEl,contentEl,footerEl,keyboardHeight)=>{let coord;const touchStart=ev=>{coord=Object(_helpers_5c745fbd_js__WEBPACK_IMPORTED_MODULE_0__.k)(ev)},touchEnd=ev=>{if(!coord)return;const endCoord=Object(_helpers_5c745fbd_js__WEBPACK_IMPORTED_MODULE_0__.k)(ev);((threshold,startCoord,endCoord)=>{if(startCoord&&endCoord){const deltaX=startCoord.x-endCoord.x,deltaY=startCoord.y-endCoord.y;return deltaX*deltaX+deltaY*deltaY>36}return!1})(0,coord,endCoord)||isFocused(inputEl)||(ev.preventDefault(),ev.stopPropagation(),(async(componentEl,inputEl,contentEl,footerEl,keyboardHeight)=>{if(!contentEl&&!footerEl)return;const scrollData=((componentEl,contentEl,keyboardHeight)=>((inputRect,contentRect,keyboardHeight,platformHeight)=>{const inputTop=inputRect.top,inputBottom=inputRect.bottom,visibleAreaTop=contentRect.top,safeAreaTop=visibleAreaTop+15,distanceToBottom=.5*Math.min(contentRect.bottom,platformHeight-keyboardHeight)-inputBottom,distanceToTop=safeAreaTop-inputTop,desiredScrollAmount=Math.round(distanceToBottom<0?-distanceToBottom:distanceToTop>0?-distanceToTop:0),scrollAmount=Math.min(desiredScrollAmount,inputTop-visibleAreaTop),distance=Math.abs(scrollAmount);return{scrollAmount:scrollAmount,scrollDuration:Math.min(400,Math.max(150,distance/.3)),scrollPadding:keyboardHeight,inputSafeY:4-(inputTop-safeAreaTop)}})((componentEl.closest(\"ion-item,[ion-item]\")||componentEl).getBoundingClientRect(),contentEl.getBoundingClientRect(),keyboardHeight,componentEl.ownerDocument.defaultView.innerHeight))(componentEl,contentEl||footerEl,keyboardHeight);if(contentEl&&Math.abs(scrollData.scrollAmount)<4)inputEl.focus();else if(relocateInput(componentEl,inputEl,!0,scrollData.inputSafeY),inputEl.focus(),\"undefined\"!=typeof window){let scrollContentTimeout;const scrollContent=async()=>{void 0!==scrollContentTimeout&&clearTimeout(scrollContentTimeout),window.removeEventListener(\"ionKeyboardDidShow\",scrollContent),contentEl&&await contentEl.scrollByPoint(0,scrollData.scrollAmount,scrollData.scrollDuration),relocateInput(componentEl,inputEl,!1,scrollData.inputSafeY),inputEl.focus()};if(contentEl){const scrollEl=await contentEl.getScrollElement();if(scrollData.scrollAmount>scrollEl.scrollHeight-scrollEl.clientHeight-scrollEl.scrollTop)return window.addEventListener(\"ionKeyboardDidShow\",scrollContent),void(scrollContentTimeout=setTimeout(scrollContent,1e3))}scrollContent()}})(componentEl,inputEl,contentEl,footerEl,keyboardHeight))};return componentEl.addEventListener(\"touchstart\",touchStart,!0),componentEl.addEventListener(\"touchend\",touchEnd,!0),()=>{componentEl.removeEventListener(\"touchstart\",touchStart,!0),componentEl.removeEventListener(\"touchend\",touchEnd,!0)}})(componentEl,inputEl,scrollEl,footerEl,keyboardHeight);scrollAssistMap.set(componentEl,rmFn)}}};inputBlurring&&(()=>{let focused=!0,didScroll=!1;const doc=document;doc.addEventListener(\"ionScrollStart\",()=>{didScroll=!0}),doc.addEventListener(\"focusin\",()=>{focused=!0},!0),doc.addEventListener(\"touchend\",ev=>{if(didScroll)return void(didScroll=!1);const active=doc.activeElement;if(!active)return;if(active.matches(SKIP_SELECTOR))return;const tapped=ev.target;tapped!==active&&(tapped.matches(SKIP_SELECTOR)||tapped.closest(SKIP_SELECTOR)||(focused=!1,setTimeout(()=>{focused||active.blur()},50)))},!1)})(),scrollPadding&&(keyboardHeight=>{const doc=document;doc.addEventListener(\"focusin\",ev=>{setScrollPadding(ev.target,keyboardHeight)}),doc.addEventListener(\"focusout\",ev=>{setScrollPadding(ev.target,0)})})(keyboardHeight);for(const input of inputs)registerInput(input);doc.addEventListener(\"ionInputDidLoad\",ev=>{registerInput(ev.detail)}),doc.addEventListener(\"ionInputDidUnload\",ev=>{(componentEl=>{if(hideCaret){const fn=hideCaretMap.get(componentEl);fn&&fn(),hideCaretMap.delete(componentEl)}if(scrollAssist){const fn=scrollAssistMap.get(componentEl);fn&&fn(),scrollAssistMap.delete(componentEl)}})(ev.detail)})}}}]);","extractedComments":[]}